"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},announcement=function(n){return String.prototype.includes||(String.prototype.includes=function(n,e){return"number"!=typeof e&&(e=0),!(e+n.length>this.length)&&-1!==this.indexOf(n,e)}),function(){var o=null;return{initAnnouncement:function(i){if(a($(".announcement-panel"))||a($(".announcement-content")))t("dom结构不符合要求！");else if(a($(".announcement-panel-expanded")))if(null!==i&&"object"===(void 0===i?"undefined":_typeof(i)))if(i.hasOwnProperty("data")&&null!==i.data&&"object"===_typeof(i.data)){o=i,"function"==typeof i.beforeLoad&&i.beforeLoad(),$(".announcement-panel .announcement-content").html("");var l,d='<a href="#"><img src="'+i.imgPath+'/close.png"></a><div class="title-wrapper"><h1 class="headTitle">'+i.data.dataMap.title+'</h1><div class="subTitle">作者：<span>'+i.data.dataMap.authorid+"</span>发布时间：<span>"+i.data.dataMap.pubdate+"</span>发布单位：<span>"+i.data.dataMap.puborgid+"</span></div></div><pre>"+i.data.dataMap.content+"</pre>",p='<div class="appendix-wrapper">';i.data.listDataMap.length>0&&(i.data.listDataMap.forEach(function(n){var e=n.filename.includes("doc")?"word":n.filename.includes("xls")?"excel":n.filename.includes("ppt")?"ppt":n.filename.includes("pdf")?"pdf":n.filename.includes("txt")?"txt":"unknown",a='<div class="appendix"><div class="appendix-icon"><a href="#" value="'+n.fileid+'"><img src="'+i.imgPath+"/"+e+'.png"></a></div><div class="appendix-name"><span>'+n.displayname+'</span></div><div class="appendix-size"><span>'+n.filesize+"</span></div></div>";p+=a}),p+="</div>"),$(".announcement-panel .announcement-content").html(d+p),e(),i.backgroundColor&&(null===i.backgroundColor.match(/^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/)?t("颜色格式不正确，仅仅支持十六进制格式！"):$(".announcement-panel").css({"background-color":i.backgroundColor})),i.zIndex&&((l=parseInt(i.zIndex,10))!=l?t("z-index不合法！"):$(".announcement-panel").css({"z-index":parseInt(i.zIndex,10)})),$(".announcement-panel").addClass("announcement-panel-expanded"),$(".announcement-panel .announcement-content >a >img").on("click",function(n){$(".announcement-panel").removeClass("announcement-panel-expanded")}),$(".appendix").on("click",function(n){"function"==typeof o.fileDownload&&o.fileDownload($(this).find(".appendix-icon>a").attr("value"))}),$(n).resize(function(){e()}),"function"==typeof i.afterLoad&&i.afterLoad()}else t("options.data：请传递非 null 对象！");else t("options：请传递非 null 对象！");else t("面板未正常关闭！")}}}();function e(){var e=.05*$(n).height(),a=.05*$(n).height(),t=.83*(.9*$(n).height()),o=($(n).width()-t)/2,i=($(n).width()-t)/2,l=$(n).width()/110;l=l>20?20:l>11?l:11,$(".announcement-panel").css({top:e,right:i,bottom:a,left:o,"font-size":l})}function a(n){return 0===n.length}function t(n){throw new Error(n)}}(window);
